<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Students Page</title>
    {% load static %}

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.6.4.min.js"
      integrity="sha384-UG8ao2jwOWB7/oDdObZc6ItJmwUkR/PfMyt9Qs5AwX7PsnYn1CRKCTWyncPTWvaS"
      crossorigin="anonymous"
    ></script>
  </head>
  <style>
   .current_text {
        font-family: "Your Desired Font", sans-serif; /* Use the desired font */
        font-weight: 600; /* Adjust the font weight */
        font-size: 14px; /* Modify the font size */
        text-transform: uppercase;
      }
  </style>

  <body>
    <nav class="navbar navbar-expand-lg bg-light">
      <div class="container-fluid">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a
              class="current_text nav-link active text-dark"
              aria-current="page"
              href="{% url 'academy_base' %}"
              >Home</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'students_page' %}"
              >Students</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'franchise_page' %}"
            >
              Franchises</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'students_page' %}"
              >Schools</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'teachers_page' %}"
              >Teachers</a
            >
            <a class="current_text nav-link text-dark" href="/inventory/"
              >Stores</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'orders_page' %}"
              >Orders</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'register_user' %}"
              >Register user</a
            >
          </div>
          <div class="logout ms-auto">
            <a
              class="current_text nav-link text-dark"
              href="{% url 'logout_user' %}"
              >Logout</a
            >
          </div>
        </div>
      </div>
    </nav>

    <header>
      <h1>Students</h1>
    </header>
    <main>
      <div>
        <label for="franchiseSelect">Select Franchise:</label>
        <select id="franchiseSelect">
          <option value="">All</option>
          {% for franchise in franchises %}
          <option value="{{ franchise }}">{{ franchise }}</option>
          {% endfor %}
        </select>
        <button onclick="filterStudents()">Filter</button>
      </div>

      <div id="studentsTables">
        <!-- Display students in separate tables based on franchise -->
        {% for franchise, students_in_franchise in students_by_franchise.items %}
        <div class="franchise-table" data-franchise="{{ franchise }}">
          <h2>{{ franchise }}</h2>
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>DOB</th>
                <th>Age</th>
                <th>Level</th>
                <th>Contact</th>
              </tr>
            </thead>
            <tbody>
              {% for student in students_in_franchise %}
              <tr>
                <td>{{ student.id }}</td>
                <td>{{ student.name }}</td>
                <td>{{ student.dob }}</td>
                <td>{{ student.age }}</td>
                <td>{{ student.level }}</td>
                <td>{{ student.contact }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% endfor %}
      </div>
    </main>

    <script>
      function filterStudents() {
        var selectedFranchise = $("#franchiseSelect").val();

        // Show/hide tables based on the selected franchise
        if (selectedFranchise) {
          $(".franchise-table").hide();
          $(
            '.franchise-table[data-franchise="' + selectedFranchise + '"]'
          ).show();
        } else {
          $(".franchise-table").show();
        }
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
