<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Students Page</title>
    {% load static %}

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.6.4.min.js"
      integrity="sha384-UG8ao2jwOWB7/oDdObZc6ItJmwUkR/PfMyt9Qs5AwX7PsnYn1CRKCTWyncPTWvaS"
      crossorigin="anonymous"
    ></script>
  </head>
  <style>
   .current_text {
        font-family: "Your Desired Font", sans-serif; /* Use the desired font */
        font-weight: 600; /* Adjust the font weight */
        font-size: 14px; /* Modify the font size */
        text-transform: uppercase;
      }
      .txt_color {
        color: #7b7979; /* Light black color */
        font-family: "Times New Roman", Times, serif;
      }
      .txt_colors {
        color: #4f4242; /* Light black color */
        font-family: "Times New Roman", Times, serif;
      }
      .smaller-div {
        max-width: 400px; /* Adjust the max-width as needed */
        margin: 0 auto; /* Center horizontally */
        padding: 20px; /* Add padding for spacing */
        border: 1px solid #ccc; /* Optional: Add border for visual separation */
      }

  </style>

  <body>
    <nav class="navbar navbar-expand-lg bg-light">
      <div class="container-fluid">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a
              class="current_text nav-link active text-dark"
              aria-current="page"
              href="{% url 'academy_base' %}"
              >Home</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'students_page' %}"
              >Students</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'franchise_page' %}"
            >
              Franchises</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'students_page' %}"
              >Schools</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'teachers_page' %}"
              >Teachers</a
            >
            <a class="current_text nav-link text-dark" href="/inventory/"
              >Stores</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'orders_page' %}"
              >Orders</a
            >
            <a
              class="current_text nav-link text-dark"
              href="{% url 'register_user' %}"
              >Register user</a
            >
          </div>
          <div class="logout ms-auto">
            <a
              class="current_text nav-link text-dark"
              href="{% url 'logout_user' %}"
              >Logout</a
            >
          </div>
        </div>
      </div>
    </nav>

    <div class="container text-center pt-3">
      <h1 class="txt_color border-bottom pb-2 mb-0">Students</h1>
    </div>
    
    <main>
      <div class="container my-5">
        <div class="smaller-div">
          <label for="franchiseSelect" class="form-label">Select Franchise:</label>
          <select id="franchiseSelect" class="form-select">
            <option value="">All</option>
            {% for franchise in franchises %}
            <option value="{{ franchise }}">{{ franchise }}</option>
            {% endfor %}
          </select>
          <button onclick="filterStudents()" class="btn btn-dark my-3" >Filter</button>
      </div>
      </div>

      <div id="studentsTables">
        <!-- Display students in separate tables based on franchise -->
        {% for franchise, students_in_franchise in students_by_franchise.items %}
        <div class="franchise-table container" data-franchise="{{ franchise }}">
          <div class="container text-start pt-3">
            <h1 class="txt_colors border-bottom pb-2 mb-0">{{ franchise }}</h1>
          </div>
          
          <table class="table table-striped my-3">
            <thead class="bg-light">
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>DOB</th>
                <th>Age</th>
                <th>Level</th>
                <th>Contact</th>
              </tr>
            </thead>
            <tbody>
              {% for student in students_in_franchise %}
              <tr>
                <td class="fw-normal mb-1">{{ student.id }}</td>
                <td class="fw-normal mb-1">{{ student.name }}</td>
                <td class="fw-normal mb-1">{{ student.dob }}</td>
                <td class="fw-normal mb-1">{{ student.age }}</td>
                <td class="fw-normal mb-1">{{ student.level }}</td>
                <td class="fw-normal mb-1">{{ student.contact }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% endfor %}
      </div>
    </main>

    <script>
      function filterStudents() {
        var selectedFranchise = $("#franchiseSelect").val();

        // Show/hide tables based on the selected franchise
        if (selectedFranchise) {
          $(".franchise-table").hide();
          $(
            '.franchise-table[data-franchise="' + selectedFranchise + '"]'
          ).show();
        } else {
          $(".franchise-table").show();
        }
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
